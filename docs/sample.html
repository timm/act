<!DOCTYPE html>

<html>
<head>
  <title>sample.lua</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="about.html">
                  about.lua
                </a>
              
                
                <a class="source" href="classes.html">
                  classes.lua
                </a>
              
                
                <a class="source" href="cli.html">
                  cli.lua
                </a>
              
                
                <a class="source" href="dist.html">
                  dist.lua
                </a>
              
                
                <a class="source" href="old.html">
                  old.lua
                </a>
              
                
                <a class="source" href="reason.html">
                  reason.lua
                </a>
              
                
                <a class="source" href="sample.html">
                  sample.lua
                </a>
              
                
                <a class="source" href="test.html">
                  test.lua
                </a>
              
                
                <a class="source" href="tricks.html">
                  tricks.lua
                </a>
              
                
                <a class="source" href="xomo.html">
                  xomo.lua
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>sample.lua</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">require</span><span class="hljs-string">&quot;about&quot;</span>
<span class="hljs-built_in">require</span><span class="hljs-string">&quot;tricks&quot;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <h2 id="dispatch">Dispatch</h2>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              <p>Add things that we aren’t skipping (icnrementing <code>n</code> as we go).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span><span class="hljs-params">(i,x)</span></span> 
  <span class="hljs-keyword">if</span> x ~= <span class="hljs-string">&quot;?&quot;</span> <span class="hljs-keyword">then</span>
    i.n = i.n + <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> i.Is.add(i,x) <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-4">&#x00a7;</a>
              </div>
              <p>Report central tendency.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mid</span><span class="hljs-params">(i)</span></span>    <span class="hljs-keyword">return</span> i.Is.mid(i) <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-5">&#x00a7;</a>
              </div>
              <p>Report the wriggle around the central tendancy.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">spread</span><span class="hljs-params">(i)</span></span> <span class="hljs-keyword">return</span> i.Is.spread(i) <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-6">&#x00a7;</a>
              </div>
              <h2 id="some">Some</h2>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-7">&#x00a7;</a>
              </div>
              <p>Reservoir sampler (of size of <code>max</code>). </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Some={}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Some.new</span><span class="hljs-params">(max)</span></span> 
  <span class="hljs-keyword">return</span> {Is=Some, n=<span class="hljs-number">0</span>, <span class="hljs-built_in">max</span>=<span class="hljs-built_in">max</span> <span class="hljs-keyword">or</span> <span class="hljs-number">256</span>, old=<span class="hljs-literal">true</span>, Has={}} <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-8">&#x00a7;</a>
              </div>
              <p>Add to a reservoir sampling. If full, replace anything at random.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Some.add</span><span class="hljs-params">(i,x)</span></span> 
  r = <span class="hljs-built_in">math</span>.<span class="hljs-built_in">random</span>
  <span class="hljs-keyword">if</span>     #i.Has &lt; i.<span class="hljs-built_in">max</span>     <span class="hljs-keyword">then</span> pos = <span class="hljs-number">1</span>+#i.Has 
  <span class="hljs-keyword">elseif</span> r()    &lt; i.<span class="hljs-built_in">max</span>/i.n <span class="hljs-keyword">then</span> pos = <span class="hljs-number">1</span>+(r()*#i.Has)//<span class="hljs-number">1</span> <span class="hljs-keyword">end</span> 
  <span class="hljs-keyword">if</span> pos <span class="hljs-keyword">then</span> 
    i.old=<span class="hljs-literal">true</span>
    i.Has[pos]=x <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-9">&#x00a7;</a>
              </div>
              <p>Return the contents, sorted.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">has</span><span class="hljs-params">(i)</span></span>  
  i.old= i.old <span class="hljs-keyword">and</span> order(i.Has) <span class="hljs-keyword">or</span> i.Has; i.old=<span class="hljs-literal">false</span>; <span class="hljs-keyword">return</span> i.Has <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-10">&#x00a7;</a>
              </div>
              <p>Report the <code>p-th</code> value within the sorted contents.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">per</span><span class="hljs-params">(i,p)</span></span> a= a <span class="hljs-keyword">or</span> has(i); <span class="hljs-keyword">return</span> a[ ((p <span class="hljs-keyword">or</span> <span class="hljs-number">.5</span>)*#a) // <span class="hljs-number">1</span> ] <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-11">&#x00a7;</a>
              </div>
              <h2 id="col">Col</h2>

            </div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-12">&#x00a7;</a>
              </div>
              <p>Abstract class for columns.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Col={}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Col.new</span><span class="hljs-params">(at,name)</span></span> <span class="hljs-keyword">return</span> {Is= Col, at=at <span class="hljs-keyword">or</span> <span class="hljs-number">1</span>, name=name <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;&quot;</span>, n=<span class="hljs-number">0</span>}</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-13">&#x00a7;</a>
              </div>
              <p>“Adding” means do nothing so the  central ten dances and spreads never change.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Col.add</span><span class="hljs-params">(i,x)</span></span> <span class="hljs-keyword">return</span> x <span class="hljs-keyword">end</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Col.mid</span><span class="hljs-params">(i)</span></span> <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;?&quot;</span> <span class="hljs-keyword">end</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Col.spread</span><span class="hljs-params">(i)</span></span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-14">&#x00a7;</a>
              </div>
              <h2 id="sym">Sym</h2>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-15">&#x00a7;</a>
              </div>
              <p>Counter for symbols.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Sym={}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sym.new</span><span class="hljs-params">(at, name)</span></span>  
  <span class="hljs-keyword">return</span> with(Col.new(at,name), {Is=Sym, has={}, mode=<span class="hljs-string">&quot;&quot;</span>, most=<span class="hljs-number">0</span>}) <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-16">&#x00a7;</a>
              </div>
              <p>Adding means updating symbol count (and the <code>mode</code>).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sym.add</span><span class="hljs-params">(i,x)</span></span> 
  i.has[x] = <span class="hljs-number">1</span> + (i.has[x] <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>)
  <span class="hljs-keyword">if</span> i.has[x] &gt; i.most <span class="hljs-keyword">then</span> i.most, i.mode = i.has[x], x <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-17">&#x00a7;</a>
              </div>
              <p><code>mid</code> means <code>mode</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sym.mid</span><span class="hljs-params">(i)</span></span> <span class="hljs-keyword">return</span> i.mode <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-18">&#x00a7;</a>
              </div>
              <p><code>Spread</code> means entropy.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sym.spread</span><span class="hljs-params">(i,   e)</span></span>
  <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(i.has) <span class="hljs-keyword">do</span> e = e - v/i.n * <span class="hljs-built_in">math</span>.<span class="hljs-built_in">log</span>(v/i.n,<span class="hljs-number">2</span>) <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> e <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-19">&#x00a7;</a>
              </div>
              <h2 id="num">Num</h2>

            </div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-20">&#x00a7;</a>
              </div>
              <p>counter for numbers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Num={}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Num.new</span><span class="hljs-params">(at,name)</span></span> 
  i= with(Col.new(at,name), {Is=Num,some=Some.new(), lo=<span class="hljs-number">1E32</span>, hi=<span class="hljs-number">-1E32</span>})
  i.w = i.name:<span class="hljs-built_in">find</span><span class="hljs-string">&quot;+&quot;</span> <span class="hljs-keyword">and</span> <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> i.name:<span class="hljs-built_in">find</span><span class="hljs-string">&quot;-&quot;</span> <span class="hljs-keyword">and</span> <span class="hljs-number">-1</span> <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">return</span> i</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-21">&#x00a7;</a>
              </div>
              <p>Keep some numbers, update <code>lo</code>, <code>hi</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Num.add</span><span class="hljs-params">(i,x)</span></span>
  add(i.some, x)
  <span class="hljs-keyword">if</span> x &gt; i.hi <span class="hljs-keyword">then</span> i.hi = x <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">if</span> x &lt; i.lo <span class="hljs-keyword">then</span> i.lo = x <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-22">&#x00a7;</a>
              </div>
              <p>Central tendency.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Num.mid</span><span class="hljs-params">(i)</span></span>    <span class="hljs-keyword">return</span>  per(i.some,<span class="hljs-number">.5</span>) <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-23">&#x00a7;</a>
              </div>
              <p>Spread around the central  tenancy means standard deviation
(Aside: we all know that +- 1,2 standard deviations is 66,95% of the mass.
Well, what else is true is that +- 1.28 standard deviations is 90% of the pass so (90-10)th/(1.28*2)
is one standard deviation.)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Num.spread</span><span class="hljs-params">(i)</span></span> <span class="hljs-keyword">return</span> (per(i.some,<span class="hljs-number">.9</span>) - per(i.some,<span class="hljs-number">.1</span>))/<span class="hljs-number">2.54</span> <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-24">&#x00a7;</a>
              </div>
              <p>Normalize</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">norm</span><span class="hljs-params">(i,x)</span></span> <span class="hljs-keyword">return</span> <span class="hljs-built_in">math</span>.<span class="hljs-built_in">abs</span>(x-y)&lt;<span class="hljs-number">1E-32</span> <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> (x-i.lo)/(i.hi-i.lo) <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-25">&#x00a7;</a>
              </div>
              <h2 id="sample">Sample</h2>

            </div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-26">&#x00a7;</a>
              </div>
              <p>holder of rows and columns</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Sample={}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sample.new</span><span class="hljs-params">(inits,       i)</span></span>
  i = {Is=Sample, rows={},keep=<span class="hljs-literal">true</span>,cols={},names={},x={},y={}}
  <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(inits)==<span class="hljs-string">&quot;table&quot;</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">for</span> _,row <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(inits <span class="hljs-keyword">or</span> {}) <span class="hljs-keyword">do</span> add(i,row) <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(inits)==<span class="hljs-string">&quot;string&quot;</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> csv(inits) <span class="hljs-keyword">do</span> row(i,t) <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> i <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-27">&#x00a7;</a>
              </div>
              <p>Report the mid of certain columns (defaults to “use all”)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sample.mid</span><span class="hljs-params">(i, cols)</span></span> 
  t={}; <span class="hljs-keyword">for</span> _,c <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(cols <span class="hljs-keyword">or</span> i.cols) <span class="hljs-keyword">do</span> t[<span class="hljs-number">1</span>+#t]=mid(c) <span class="hljs-keyword">end</span>; <span class="hljs-keyword">return</span> t <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-28">&#x00a7;</a>
              </div>
              <p>Report the spread of certain columns (defaults to “use all”)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Sample.spread</span><span class="hljs-params">(i, cols)</span></span> 
  t={}; <span class="hljs-keyword">for</span> _,c <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(cols <span class="hljs-keyword">or</span> i.cols) <span class="hljs-keyword">do</span> t[<span class="hljs-number">1</span>+#t]=spread(c) <span class="hljs-keyword">end</span>; <span class="hljs-keyword">return</span> t <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-29">&#x00a7;</a>
              </div>
              <p>Add new row. If this is the first row, the use the row to create columns.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">row</span><span class="hljs-params">(i,t)</span></span> 
  <span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">names2Column</span><span class="hljs-params">(      what,new,tmp)</span></span>
    i.names = t
    <span class="hljs-keyword">for</span> at,name <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(t)  <span class="hljs-keyword">do</span>
      what = name:<span class="hljs-built_in">find</span><span class="hljs-string">&quot;:&quot;</span> <span class="hljs-keyword">and</span> Col <span class="hljs-keyword">or</span> name:<span class="hljs-built_in">match</span><span class="hljs-string">&quot;^[A-Z]&quot;</span> <span class="hljs-keyword">and</span> Num <span class="hljs-keyword">or</span> Sym
      new  = what.new(at,name) 
      i.cols[<span class="hljs-number">1</span>+#i.cols] = new
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> name:<span class="hljs-built_in">find</span><span class="hljs-string">&quot;:&quot;</span> <span class="hljs-keyword">then</span>
        xy= (name:<span class="hljs-built_in">find</span><span class="hljs-string">&quot;&lt;&quot;</span> <span class="hljs-keyword">or</span> name:<span class="hljs-built_in">find</span><span class="hljs-string">&quot;&gt;&quot;</span> <span class="hljs-keyword">or</span> name:<span class="hljs-built_in">find</span><span class="hljs-string">&quot;!&quot;</span>) <span class="hljs-keyword">and</span> i.y <span class="hljs-keyword">or</span> i.x
        xy[ <span class="hljs-number">1</span>+#xy ] = new
        <span class="hljs-keyword">if</span> name:<span class="hljs-built_in">find</span><span class="hljs-string">&quot;!&quot;</span> <span class="hljs-keyword">then</span> i.klass = new <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span> 
   <span class="hljs-keyword">end</span> <span class="hljs-comment">-----------------</span>
   <span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">data</span><span class="hljs-params">()</span></span>
     <span class="hljs-keyword">if</span> i.keep <span class="hljs-keyword">then</span> i.rows[ <span class="hljs-number">1</span>+#i.rows ] = t <span class="hljs-keyword">end</span>
     <span class="hljs-keyword">for</span> _,col <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(i.cols) <span class="hljs-keyword">do</span> add(col, t[col.at]) <span class="hljs-keyword">end</span> 
   <span class="hljs-keyword">end</span> <span class="hljs-comment">-------------------------------------------</span>
   <span class="hljs-keyword">if</span> #i.names&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">then</span> data() <span class="hljs-keyword">else</span> names2Column() <span class="hljs-keyword">end</span> <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-30">&#x00a7;</a>
              </div>
              <p>Return a new sampler with same structure as <code>i</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clone</span><span class="hljs-params">(i, inits,     i)</span></span>
   i = Sample.new()
   add(i,i.names)
   <span class="hljs-keyword">for</span> _,row <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(inits <span class="hljs-keyword">or</span> {}) <span class="hljs-keyword">do</span> add(i,row) <span class="hljs-keyword">end</span>
   <span class="hljs-keyword">return</span> i <span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
